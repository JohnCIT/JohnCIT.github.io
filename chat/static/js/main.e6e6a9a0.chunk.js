(this.webpackJsonpchat_app=this.webpackJsonpchat_app||[]).push([[0],{46:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),r=n(15),o=n.n(r),c=(n(46),n(19),n(18),n(30)),s=n.n(c),l=n(32),d=n(24),u=n(71),h=n(5),b=Object(u.a)({root:{},message:{display:"flex",alignItems:"center",textAlign:"left",listStyle:"none"},sent:{flexDirection:"row-reverse",color:"white",background:"#0b93f6",alignSelf:"flex-end"},received:{background:"#22e276",color:"black",alignSelf:"flex-start"},messageStyle:{maxwidth:"500px",marginbottom:"12px",lineheight:"24px",padding:"10px 20px",borderradius:"25px",position:"relative",color:"white",textalign:"center"},image:{width:"40px",height:"40px",borderRadius:"50%",margin:"2px 5px"},date:{display:"flex",width:"100px",padding:"10px",paddingBottom:"20px"},timeSent:{flexDirection:"row-reverse",color:"white",alignSelf:"flex-end"},timeReceived:{color:"black",alignSelf:"flex-start"}});var p=function(e){var t,n,i=e.message,a=i.text,r=i.uid,o=i.photoURL,c=i.createdAt,s=b(),l=r===(null===(t=e.auth)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.uid),d=l?s.sent:s.received,u=l?s.timeSent:s.timeReceived,p=(null===c||void 0===c?void 0:c.toDate().toLocaleTimeString())+" "+(null===c||void 0===c?void 0:c.toDate().toLocaleDateString());return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"".concat(s.message," ").concat(d),children:[Object(h.jsx)("img",{className:s.image,src:o}),Object(h.jsx)("div",{className:s.messageStyle,children:a})]}),Object(h.jsx)("div",{className:"".concat(s.date," ").concat(u),children:p})]})},g=n(12),m=n(37);g.a.initializeApp({apiKey:"AIzaSyBmLLkjb7Yuw24Efm1r8C3qayxNqUZWqMA",authDomain:"chat-app-29cc7.firebaseapp.com",projectId:"chat-app-29cc7",storageBucket:"chat-app-29cc7.appspot.com",messagingSenderId:"511025175348",appId:"1:511025175348:web:7ffeb00f97188cc29ee361",measurementId:"G-VFWMWRLH6F"});var x={firebase:g.a,firestore:g.a.firestore(),auth:g.a.auth()},f=n(73),j=Object(u.a)({form:{height:"10vh",position:"fixed",bottom:0,backgroundColor:"rgb(24, 23, 23)",width:"100%",maxWidth:"728px",display:"flex",fontSize:"1.5rem"},main:{padding:"10px",height:"80vh",margin:"10vh 0 10vh",overflowY:"scroll",display:"flex",flexDirection:"column","&::-webkit-scrollbar-thumb":{background:"#6649b8"},"&::-webkit-scrollbar-track":{background:"#1e1e24"},"&::-webkit-scrollbar":{width:"0.25rem"}},formButton:{width:"20%",backgroundColor:"rgb(56, 56, 143)"},input:{lineHeight:"1.5",width:"100%",fontSize:"1.5rem",background:"rgb(58, 58, 58)",color:"white",outline:"none",border:"none",padding:"0 10px"}});var v=function(){var e=x.firestore,t=x.auth,n=e.collection("messages"),r=n.orderBy("createdAt","asc").limitToLast(25),o=Object(m.a)(r,{idField:"id"}),c=Object(d.a)(o,1)[0],u=Object(i.useState)(""),b=Object(d.a)(u,2),v=b[0],O=b[1],w=a.a.useRef(null),S=j();Object(i.useEffect)((function(){var e;null===w||void 0===w||null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[c]);var y=function(){var e=Object(l.a)(s.a.mark((function e(i){var a,r,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),!t.currentUser||""==v||null==v){e.next=9;break}return r=t.currentUser,o=r.uid,c=r.photoURL,e.next=5,n.add({text:v,createdAt:g.a.firestore.FieldValue.serverTimestamp(),uid:o,photoURL:c});case 5:O(""),null===w||void 0===w||null===(a=w.current)||void 0===a||a.scrollIntoView({behavior:"smooth"}),e.next=10;break;case 9:console.log("!!!!!! Send failed due to no current user");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("main",{className:S.main,children:[c&&c.map((function(e){return Object(h.jsx)(p,{message:e,auth:t},e.id)})),Object(h.jsx)("div",{id:"dummy",ref:w})]}),Object(h.jsxs)("form",{className:S.form,onSubmit:y,children:[Object(h.jsx)("input",{value:v,className:S.input,onChange:function(e){return O(e.target.value)}}),Object(h.jsx)(f.a,{variant:"contained",color:"primary",type:"submit",className:S.formButton,disabled:""===v,children:"Send"})]})]})};var O=function(){var e=x.auth;return Object(h.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){var t=new g.a.auth.GoogleAuthProvider;e.signInWithPopup(t)},children:"Sign in with google"})},w=Object(u.a)({signOutButton:{justifyContent:"start"}});var S=function(){var e=x.auth,t=w();return e.currentUser&&Object(h.jsx)(f.a,{onClick:function(){return e.signOut()},className:t.signOutButton,variant:"contained",color:"secondary",children:"Sign Out"})},y=a.a.createContext(null),k=n.p+"static/media/chatology-logos.2f19b4cd.jpeg",C=Object(u.a)({root:{textAlign:"center",maxWidth:"728px",margin:"0 auto"},header:{backgroundColor:"#181717",height:"10vh",minHeight:"50px",color:"white",position:"fixed",width:"100%",maxWidth:"728px",top:0,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px",boxSizing:"border-box",zIndex:99},section:{display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"100vh",backgroundColor:"rgb(40, 37, 53)"},title:{padding:"40px",fontSize:"28px"},signOutButton:{justifyContent:"start"}});var N=function(){var e=Object(i.useContext)(y),t=C();return Object(h.jsxs)("div",{className:t.root,children:[Object(h.jsxs)("header",{className:t.header,children:[Object(h.jsx)("img",{width:"60px",src:k}),Object(h.jsx)("div",{className:t.title,children:"Chatology - Redefining chat"}),Object(h.jsx)(S,{})]}),Object(h.jsx)("section",{className:t.section,children:e?Object(h.jsx)(v,{}):Object(h.jsx)(O,{})})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),r(e),o(e)}))},B=function(e){var t=e.children,n=Object(i.useState)(null),a=Object(d.a)(n,2),r=a[0],o=a[1];return Object(i.useEffect)((function(){return x.auth.onAuthStateChanged((function(e){o(e)}))}),[]),Object(h.jsx)(y.Provider,{value:r,children:t})};o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(B,{children:Object(h.jsx)(N,{})})}),document.getElementById("root")),I()}},[[55,1,2]]]);
//# sourceMappingURL=main.e6e6a9a0.chunk.js.map