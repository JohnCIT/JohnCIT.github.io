(this.webpackJsonpchat_app=this.webpackJsonpchat_app||[]).push([[0],{59:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(22),c=n.n(r),o=(n(59),n(21),n(20),n(17));o.a.initializeApp({apiKey:"AIzaSyBmLLkjb7Yuw24Efm1r8C3qayxNqUZWqMA",authDomain:"chat-app-29cc7.firebaseapp.com",projectId:"chat-app-29cc7",storageBucket:"chat-app-29cc7.appspot.com",messagingSenderId:"511025175348",appId:"1:511025175348:web:7ffeb00f97188cc29ee361",measurementId:"G-VFWMWRLH6F"});var s={firebase:o.a,firestore:o.a.firestore(),auth:o.a.auth()},l=n(86),d=n(3);var u=function(){var e=s.auth;return Object(d.jsx)(l.a,{variant:"contained",color:"primary",onClick:function(){var t=new o.a.auth.GoogleAuthProvider;e.signInWithPopup(t)},children:"Sign in with google"})},h=n(88),b=Object(h.a)({signOutButton:{justifyContent:"start"}});var g=function(){var e=s.auth,t=b();return e.currentUser&&Object(d.jsx)(l.a,{onClick:function(){return e.signOut()},className:t.signOutButton,variant:"contained",color:"secondary",children:"Sign Out"})},p=i.a.createContext(null),x=n.p+"static/media/chatology-logos.2f19b4cd.jpeg",m=n(18),j=n(39),f=n.n(j),v=n(46),O=Object(h.a)({root:{},message:{display:"flex",alignItems:"center",textAlign:"left",listStyle:"none"},sent:{flexDirection:"row-reverse",color:"white",background:"#0b93f6",alignSelf:"flex-end"},received:{background:"#22e276",color:"black",alignSelf:"flex-start"},messageStyle:{maxwidth:"500px",marginbottom:"12px",lineheight:"24px",padding:"10px 20px",borderradius:"25px",position:"relative",color:"white",textalign:"center"},image:{width:"40px",height:"40px",borderRadius:"50%",margin:"2px 5px"},date:{display:"flex",width:"100px",padding:"10px",paddingBottom:"20px"},timeSent:{flexDirection:"row-reverse",color:"white",alignSelf:"flex-end"},timeReceived:{color:"black",alignSelf:"flex-start"}});var w=function(e){var t,n,a=e.message,i=a.text,r=a.uid,c=a.photoURL,o=a.createdAt,s=O(),l=r===(null===(t=e.auth)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.uid),u=l?s.sent:s.received,h=l?s.timeSent:s.timeReceived,b=(null===o||void 0===o?void 0:o.toDate().toLocaleTimeString())+" "+(null===o||void 0===o?void 0:o.toDate().toLocaleDateString());return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"".concat(s.message," ").concat(u),children:[Object(d.jsx)("img",{className:s.image,src:c}),Object(d.jsx)("div",{className:s.messageStyle,children:i})]}),Object(d.jsx)("div",{className:"".concat(s.date," ").concat(h),children:b})]})},k=n(47),S=n(89),y=n(48),C=n.n(y),N=Object(h.a)({form:{height:"10vh",position:"fixed",bottom:0,backgroundColor:"rgb(24, 23, 23)",width:"100%",maxWidth:"728px",display:"flex",fontSize:"1.5rem"},main:{padding:"10px",height:"80vh",margin:"10vh 0 10vh",overflowY:"scroll",display:"flex",flexDirection:"column","&::-webkit-scrollbar-thumb":{background:"#6649b8"},"&::-webkit-scrollbar-track":{background:"#1e1e24"},"&::-webkit-scrollbar":{width:"0.25rem"}},formButton:{width:"20%",backgroundColor:"rgb(56, 56, 143)"},input:{lineHeight:"1.5",width:"100%",fontSize:"1.5rem",background:"rgb(58, 58, 58)",color:"white",outline:"none",border:"none",padding:"0 10px"},goBack:{position:"absolute",margin:"20px"}});var B=function(e){var t=e.goBackFunc,n=s.firestore,r=s.auth,c=n.collection("messages"),u=c.orderBy("createdAt","asc").limitToLast(25),h=Object(k.a)(u,{idField:"id"}),b=Object(m.a)(h,1)[0],g=Object(a.useState)(""),p=Object(m.a)(g,2),x=p[0],j=p[1],O=i.a.useRef(null),y=N();Object(a.useEffect)((function(){var e;null===O||void 0===O||null===(e=O.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[b]);var B=function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!r.currentUser||""==x||null==x){e.next=9;break}return a=r.currentUser,i=a.uid,s=a.photoURL,e.next=5,c.add({text:x,createdAt:o.a.firestore.FieldValue.serverTimestamp(),uid:i,photoURL:s});case 5:j(""),null===O||void 0===O||null===(n=O.current)||void 0===n||n.scrollIntoView({behavior:"smooth"}),e.next=10;break;case 9:console.log("!!!!!! Send failed due to no current user");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("main",{className:y.main,children:[Object(d.jsx)(S.a,{className:y.goBack,color:"primary","aria-label":"add",onClick:t,children:Object(d.jsx)(C.a,{})}),b&&b.map((function(e){return Object(d.jsx)(w,{message:e,auth:r},e.id)})),Object(d.jsx)("div",{id:"dummy",ref:O})]}),Object(d.jsxs)("form",{className:y.form,onSubmit:B,children:[Object(d.jsx)("input",{value:x,className:y.input,onChange:function(e){return j(e.target.value)}}),Object(d.jsx)(l.a,{variant:"contained",color:"primary",type:"submit",className:y.formButton,disabled:""===x,children:"Send"})]})]})};Object(h.a)({root:{}});var F="GLOBAL",I="NONE";var L=function(){s.firestore,s.auth;var e=Object(a.useState)(I),t=Object(m.a)(e,2),n=t[0],i=t[1],r=function(){i(I)},c=Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(l.a,{onClick:function(){i(F)},children:"Open Global Chat"})});return Object(d.jsx)(d.Fragment,{children:function(){switch(n){case F:return Object(d.jsx)(B,{goBackFunc:r});default:return c}}()})},A=Object(h.a)({root:{textAlign:"center",maxWidth:"728px",margin:"0 auto"},header:{backgroundColor:"#181717",height:"10vh",minHeight:"50px",color:"white",position:"fixed",width:"100%",maxWidth:"728px",top:0,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px",boxSizing:"border-box",zIndex:99},section:{display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"100vh",backgroundColor:"rgb(40, 37, 53)"},title:{padding:"40px",fontSize:"28px"},signOutButton:{justifyContent:"start"}});var D=function(){var e=Object(a.useContext)(p),t=A();return Object(d.jsxs)("div",{className:t.root,children:[Object(d.jsxs)("header",{className:t.header,children:[Object(d.jsx)("img",{width:"60px",src:x}),Object(d.jsx)("div",{className:t.title,children:"Chatology - Redefining chat"}),Object(d.jsx)(g,{})]}),Object(d.jsx)("section",{className:t.section,children:e?Object(d.jsx)(L,{}):Object(d.jsx)(u,{})})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,91)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))},U=function(e){var t=e.children,n=Object(a.useState)(null),i=Object(m.a)(n,2),r=i[0],c=i[1];return Object(a.useEffect)((function(){return s.auth.onAuthStateChanged((function(e){c(e)}))}),[]),Object(d.jsx)(p.Provider,{value:r,children:t})};c.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(U,{children:Object(d.jsx)(D,{})})}),document.getElementById("root")),R()}},[[72,1,2]]]);
//# sourceMappingURL=main.90b97a0f.chunk.js.map